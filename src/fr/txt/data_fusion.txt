**Fusion des données Gyro et Accéléro :**\\
**Problème physique :**\\
Tout capteurs électronique, n'est pas parfait. Celui-ci renvoi toujours une mesure réelle et une erreur (capteur = Etat + err).\\
Par exemple un [[gyroscopes|gyroscope]] nous renvoi une tension qui est l'image de la vitesse angulaire qu'il subit ([[http://tom.poub.free.fr/blog/XUFO/Capteurs/Gyro_Piezos/ADXRS150.pdf]]). Donc pour obtenir l'angle, il faut intégrer ce signal, mais dans ce cas les valeurs de l'erreur de la mesure (err) s'accumulent, et cette somme des erreurs peut devenir plus importante que la valeur de l'angle, quand on reste immobile.\\
On dit que ce capteur dérive. En fait, sa valeur milieu (tension rendu par le capteur pour une vitesse de rotation nulle) varie en fonction de la température, des mouvements de translations subit, ainsi que des mouvements angulaires précédents. Seuls les capteurs gyroscopique à fibre optique semblent être capable, après caractérisation et calibration, d'avoir une dérive extrêmement faible ([[http://tom.poub.free.fr/blog/XUFO/Capteurs/Precision-calibration_for_gyro_Borenstein_paper82.pdf]]). Mais ils sont extrêmement cher. :-\.\\

Donc pour compenser cette dérive, on utilise un autre type de capteur, qui fonctionne dans un autre repère de mesure, l'accéléromètre ([[http://tom.poub.free.fr/blog/XUFO/Capteurs/Accelerometres/LIS3LV02DQ.pdf]]).\\
Celui-ci mesure les accélérations, et lorsque l'hélicoptère n'a pas de mouvements de translation trop important, il mesure alors la gravité terrestre. De cette mesure on peut en déduire l'angle du capteur ([[http://tom.pycke.be/mav/69/accelerometer-to-attitude]]). Et l'accéléromètre ne permet pas à lui seul d'asservir la position angulaire d'un bras, car il est trop lent, et il est sensible aux déplacements latéraux.

Donc en résumé, pour s'affranchir des erreurs mesurées par les capteurs, on utilise 2 capteurs qui nous renvoient la même information (l'angle), mais qui travaillent dans 2 repères de mesures différents (rotation angulaire et accélération XYZ).\\
Le capteur gyroscopique est plus précis en haute fréquence qu'en basse fréquence (la dérive est lente, et correspond à une basse fréquence). L'accéléromètre est plus précis en basse fréquence qu'en haute fréquences (trop sensible aux vibrations).

Maintenant il est nécessaire de faire de la "fusion de données", de ces capteurs. Pour le moment nous connaissons 3 méthodes :
    * Par dichotomie proportionnelle. C'est une méthode exposé par la société CrossBow ([[http://www.xbow.com/Support/Support_pdf_files/IMUAppNote.pdf]]). Cette méthode a été implémenté dans le projet [[http://tom.poub.free.fr|STiX]] avec quelques modifications (ajout cyclique d'une valeur minimale en cas d'écart, pour faire tendre lentement l'erreur vers 0), et les résultats sont assez satisfaisants ([[http://tom.poub.free.fr/blog/index.php?gallery/x-ufo-perso/adxrs150-v1/adxrs150_v1_040#gallery]]). Ce principe est aussi utilisé par le projet [[http://uavp.ch/moin|UAVP]].
    * A l'aide du filtre de Kalmann ([[http://tom.pycke.be/mav/71/kalman-filtering-of-imu-data]]). Ce filtre semble très efficace. on trouve pas mal de code pour des traitements sur un axe (projet [[http://autopilot.cvs.sourceforge.net/viewvc/autopilot/efis/src/kf/AHRS.cpp?view=markup|autopilot]]). Personnellement, je ne le maitrise pas du tout, et dans les différentes cas où je l'ai vu appliqué, les gens ont utilisés des coefficients "génériques" ou "standard". Ensuite pour être appliqué sur les 3 axes, idéalement il ne faut pas faire 3 filtres distincts mais reprendre la matrice pour qu'elle soit directement applicable aux 3 axes, car il y a des interactions. je laisse le soin à des personnes plus compétentes, d'écrire sur ce sujet. ^_^ 
    * Le filtre complémentaire ([[http://tom.poub.free.fr/blog/XUFO/Docs/inertial.pdf]]). Ce principe était surtout utilisé dans le domaine analogique, mais avec la discrétisation, et les DSP, il est très vite devenu incontournable dans le monde numérique. Le principe est de dire que si un capteur et plus précis dans une gamme de fréquences, on n'exploite que celle ci, et on utilise un autre capteur qui est plus précis dans la gamme de fréquence manquante. Eensuite on additionne les 2 valeurs pour obtenir le spectre complet de mesure. Par exemple, si on considère que le gyroscope n'est précis (pas de dérive) qu'a partir de 0.1 Hz, on lui applique un filtre numérique passe haut avec comme fréquence de coupure 0.1 Hz. Ensuite on applique un filtre numérique passe bas sur l'accéléromètre à 0.1hz, en sachant qu'il est plus précis en basse fréquence. On additionne les valeurs des 2 signaux pour avoir la mesure. Les résultats sont très satisfaisant ([[http://tom.poub.free.fr/blog/index.php?gallery/x-ufo-perso/square-light/square_light_21#gallery]])

Il est très probable qu'il existe aussi d'autres méthodes, ou même que l'on puissent coupler des méthodes (filtres complémentaire, et dichotomie proportionnelle), je ne les connais pas actuellement, mais nous sommes preneur d'infos et de tests.